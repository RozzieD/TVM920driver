#ifndef TVM920DEFH
#define TVM920DEFH

#define TVM_UDP_PORT 8701
#define TVM_MCU_IPADDR 192<<24|168<<16|0<<8|8<<0             		/* HAS to be this */

#define TVM_MASTER_IPADDR 192<<24|168<<16|0<<8|10<<0	/* HAS to be this */

#define TVM920_NNOZZ 4
#define TVM_POLL_RATE_mS 16


#define TVM920_RW_CMD_NBYTES 12
#define TVM920_RW_READ_CMD_BYTE 0x1
#define TVM920_RW_WRITE_CMD_BYTE 0x2
    #define TVM920_RW_READ_CMD_BYTE_BYTEPOS  0x0
    #define TVM920_RW_BYTE_LOWADDR_BYTEPOS 0x4
    #define TVM920_RW_BYTE_HIGHADDR_BYTEPOS 0x5	/* ? */

    #define TVM920_RW_BYTE_DATA_BYTEPOS 0x8   /* little endian 32 bit int */
    #define TVM920_READ_BYTE_RETURN_DATA_QUAL_BYTEPOS 0x5      /* is 0x11 on readback seems GOOD x10 = BAD */

#define   TVM920_RW_REG_XTRAVEL 0x8
#define   TVM920_RW_REG_YTRAVEL 0x9
#define   TVM920_RW_REG_YTRAVEL_2 0xA /* same as 9 */

#define   TVM920_RW_REG_ENDSTOPDEFEAT_Z 0x1f4
#define   TVM920_RW_REG_ENDSTOPDEFEAT_Y 0x1f5   /* 0x01000000 */
#define   TVM920_RW_REG_ENDSTOPDEFEAT_X 0x1f6
#define 	TVM920_RW_REG_ENDSTOPDEFEAT_VALUE 0x01000000
/* status */
#define TVM920_MOTION_STATUS_STOPPED 0
#define TVM920_MOTION_STATUS_OTHER 1
#define TVM920_MOTION_STATUS_TRAVEL 2
#define TVM920_MOTION_STATUS_DECEL 3




#define  TVM920_GPIO_CMD_NBYTES 8
#define  TVM920_GPIO_CMD_SETBITS_GPIO 0x16
#define  TVM920_GPIO_CMD_CLRBITS_GPIO 0x17

#define  TVM920_GPIO_CMD_UPLIGHT 16
#define  TVM920_GPIO_CMD_PICK_1ST_BIT 24
#define  TVM920_GPIO_CMD_PICK_1 24
#define  TVM920_GPIO_CMD_PICK_2 25
#define  TVM920_GPIO_CMD_PICK_3 26
#define  TVM920_GPIO_CMD_PICK_4 27

#define  TVM920_GPIO_CMD_Y1MOTOR 28 /*  -ix 0x16 command with this bit, motor defeats */
#define  TVM920_GPIO_CMD_Y2MOTOR 29
#define  TVM920_GPIO_CMD_UNKNOWNKNOWN 30
#define  TVM920_GPIO_CMD_DOWNLIGHT 31


#define MAXFEEDERPOS 64
#define  TVM920_FEEDERCMD_NBYTES 12
#define  TVM920_FEEDERCMD 0x5
#define  TVM920_FEEDERCMD_NFRONT_FEEDERS 28
#define  TVM920_FEEDERCMD_NREAR_FEEDERS 28
#define  TVM920_FEEDERCMD_1STFRONTFEEDER_BIT 8
#define  TVM920_FEEDERCMD_1STREARFEEDER_BIT 40    /* feeders run left to right from front of machine for F & R??? */


/* status */
#define TVM920_STS_NBYTES  52

#define TVM920_STS_PICK1_ACTIVE_BIT ((4*8)+0)
#define TVM920_STS_PICK2_ACTIVE_BIT ((4*8)+1)
#define TVM920_STS_PICK3_ACTIVE_BIT ((4*8)+2)
#define TVM920_STS_PICK4_ACTIVE_BIT ((4*8)+3)
#define TVM920_STS_DOWNLIGHT_ACTIVE_BIT ((4*8)+7)

#define TVM920_STS_UPLIGHT_ACTIVE_BIT ((5*8)+0)

#define TVM920_STS_MYSTERY1_BIT ((5*8)+4)    /* may be the 'ready' bit ? */



#define TVM920_STS_POSLIMX_BIT ((8*8)+0)
#define TVM920_STS_NEGLIMX_BIT ((8*8)+1)
#define TVM920_STS_POSLIMY_RLHS_BIT ((8*8)+2)
#define TVM920_STS_POSLIMY_RRHS_BIT ((8*8)+3)
#define TVM920_STS_NEGLIMY_FLHS_BIT ((8*8)+4)
#define TVM920_STS_NOZZ1_2_NEGZ_BIT ((8*8)+5)
#define TVM920_STS_NOZZ3_4_NEGZ_BIT ((8*8)+6)
#define TVM920_STS_MYSTERY2_BIT ((8*8)+7)

/* front panel buttons */
/* buttons go active LOW */
#define TVM920_STS_BUTTON_YELLOW_BIT ((9*8)+3)
#define TVM920_STS_BUTTON_RED_BIT ((9*8)+2)
#define TVM920_STS_BUTTON_GREEN_BIT ((9*8)+1)
#define TVM920_STS_MYSTERY3_BIT ((9*8)+0)

#define TVM920_STS_XLOC_STATUS_BYTE_POS 0x28
#define TVM920_STS_XMOVE_STATUS_BYTE_POS 0x33

#define TVM920_STS_YLOC_STATUS_BYTE_POS 0x24
#define TVM920_STS_YMOVE_STATUS_BYTE_POS 0x32




#define TVM920_STS_NOZZ_1A_LOC_BYTE_POS 0xc		/* c,d,e,f */
#define TVM920_STS_NOZZ_1A_MOVE_STATUS_BYTE_POS 0x2c

#define TVM920_STS_NOZZ_2A_LOC_BYTE_POS 0x10		/*10,11,12,13 */
#define TVM920_STS_NOZZ_2A_MOVE_STATUS_BYTE_POS 0x2d

#define TVM920_STS_NOZZ_3A_LOC_BYTE_POS 0x14		/* 14,15,16,17 */
#define TVM920_STS_NOZZ_3A_MOVE_STATUS_BYTE_POS 0x2e

#define TVM920_STS_NOZZ_4A_LOC_BYTE_POS 0x18		/* 18,19,1a,1b */
#define TVM920_STS_NOZZ_4A_MOVE_STATUS_BYTE_POS 0x2f


/* nozzle Z */
#define TVM920_STS_NOZZ_1_2Z_LOC_BYTE_POS 0x1c		/* 1c,1d,1e,1f */
#define TVM920_STS_NOZZ_3_4Z_LOC_BYTE_POS 0x20		/* 20,21,22,23 */

#define TVM920_STS_NOZZ1_2ZMOVE_STATUS_BYTE_POS 0x30
#define TVM920_STS_NOZZ3_4ZMOVE_STATUS_BYTE_POS 0x31




/* mystery */


/* movement CONTROL commands */
#define  TVM920_MOTION_PREFIX_NBYTES 68
#define  TVM920_MOTION_PREFIX_CMDBYTE 0x7	/* 1st byte */

/* motion */

#define TVM920_MOTION_SETPOS_NBYTES 36          /* used to set location = xyz. (after homing ) */
#define  TVM920_MOTION_SETPOS_CMDBYTE_BYTEPOS 0
#define  TVM920_MOTION_SETPOS_CMDBYTE 0x8

#define TVM920_MOTION_NBYTES 36
#define  TVM920_MOTION_CMDBYTE_BYTEPOS 0
#define  TVM920_MOTION_CMDBYTE 0x9


#define  TVM920_MOTION_CTLBYTE_BYTEPOS 2
    #define  TVM920_MOTION_CTLBYTE_A1_BIT 0
    #define  TVM920_MOTION_CTLBYTE_A2_BIT 1
    #define  TVM920_MOTION_CTLBYTE_A3_BIT 2
    #define  TVM920_MOTION_CTLBYTE_A4_BIT 3

    #define  TVM920_MOTION_CTLBYTE_Z1_2_BIT 4
    #define  TVM920_MOTION_CTLBYTE_Z3_4_BIT 5
    #define  TVM920_MOTION_CTLBYTE_Y_BIT 6
    #define  TVM920_MOTION_CTLBYTE_X_BIT 7

#define  TVM920_MOTION_Z3_4_BYTEPOS 0x18
#define  TVM920_MOTION_Z1_2_BYTEPOS 0x14

#define  TVM920_MOTION_Y_BYTEPOS 0x1c
#define  TVM920_MOTION_X_BYTEPOS 0x20

#define  TVM920_MOTION_A_RATE 0x19
#define  TVM920_MOTION_A1_BYTEPOS 0x4  	/* these are single bytes 0x19 ?*/
#define  TVM920_MOTION_A2_BYTEPOS 0x8
#define  TVM920_MOTION_A3_BYTEPOS 0xc
#define  TVM920_MOTION_A4_BYTEPOS 0x10


#define TVM920_MOTION_END_NBYTES 4
    #define TVM920_MOTION_END_CMDBYTE 0x0a
    #define TVM920_MOTION_END_BYTE1 0x00
    #define TVM920_MOTION_END_INFO_BYTEPOS 2
        #define TVM920_MOTION_END_BYTE2_A1_BIT 0
        #define TVM920_MOTION_END_BYTE2_A2_BIT 1
        #define TVM920_MOTION_END_BYTE2_A3_BIT 2
        #define TVM920_MOTION_END_BYTE2_A4_BIT 3
        #define TVM920_MOTION_END_BYTE2_Z1_2_BIT 4
        #define TVM920_MOTION_END_BYTE2_Z3_4_BIT 5
        #define TVM920_MOTION_END_BYTE2_Y_BIT 6
        #define TVM920_MOTION_END_BYTE2_X_BIT 7

    #define TVM920_MOTION_END_BYTE3 0x00



#endif

